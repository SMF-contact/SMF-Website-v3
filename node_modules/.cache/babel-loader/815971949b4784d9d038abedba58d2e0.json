{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ReactMinimalPieChart = {}, global.React));\n})(this, function (exports, React) {\n  'use strict';\n\n  function _interopDefaultLegacy(e) {\n    return e && typeof e === 'object' && 'default' in e ? e : {\n      'default': e\n    };\n  }\n\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  function degreesToRadians(degrees) {\n    return degrees * Math.PI / 180;\n  }\n\n  function valueBetween(value, min, max) {\n    if (value > max) return max;\n    if (value < min) return min;\n    return value;\n  }\n\n  function extractPercentage(value, percentage) {\n    return percentage / 100 * value;\n  }\n\n  function bisectorAngle(startAngle, lengthAngle) {\n    return startAngle + lengthAngle / 2;\n  }\n\n  function shiftVectorAlongAngle(angle, distance) {\n    var angleRadians = degreesToRadians(angle);\n    return {\n      dx: distance * Math.cos(angleRadians),\n      dy: distance * Math.sin(angleRadians)\n    };\n  }\n\n  function isNumber(value) {\n    return typeof value === 'number';\n  }\n\n  function functionProp(prop, payload) {\n    return typeof prop === 'function' ? prop(payload) : prop;\n  }\n\n  function sumValues(data) {\n    var sum = 0;\n\n    for (var i = 0; i < data.length; i++) {\n      sum += data[i].value;\n    }\n\n    return sum;\n  } // Append \"percentage\", \"degrees\" and \"startAngle\" to each data entry\n\n\n  function extendData(_ref) {\n    var data = _ref.data,\n        totalAngle = _ref.lengthAngle,\n        totalValue = _ref.totalValue,\n        paddingAngle = _ref.paddingAngle,\n        chartStartAngle = _ref.startAngle;\n    var total = totalValue || sumValues(data);\n    var normalizedTotalAngle = valueBetween(totalAngle, -360, 360);\n    var numberOfPaddings = Math.abs(normalizedTotalAngle) === 360 ? data.length : data.length - 1;\n    var singlePaddingDegrees = Math.abs(paddingAngle) * Math.sign(totalAngle);\n    var degreesTakenByPadding = singlePaddingDegrees * numberOfPaddings;\n    var degreesTakenByPaths = normalizedTotalAngle - degreesTakenByPadding;\n    var lastSegmentEnd = 0;\n    var extendedData = []; // @NOTE: Shall we evaluate percentage accordingly to dataEntry.value's sign?\n\n    for (var i = 0; i < data.length; i++) {\n      var dataEntry = data[i];\n      var valueInPercentage = total === 0 ? 0 : dataEntry.value / total * 100;\n      var degrees = extractPercentage(degreesTakenByPaths, valueInPercentage);\n      var startAngle = lastSegmentEnd + chartStartAngle;\n      lastSegmentEnd = lastSegmentEnd + degrees + singlePaddingDegrees;\n      extendedData.push(Object.assign({\n        percentage: valueInPercentage,\n        startAngle: startAngle,\n        degrees: degrees\n      }, dataEntry));\n    }\n\n    return extendedData;\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function ReactMinimalPieChartLabel(_ref) {\n    _ref.dataEntry;\n    _ref.dataIndex;\n\n    var props = _objectWithoutPropertiesLoose(_ref, [\"dataEntry\", \"dataIndex\"]);\n\n    return /*#__PURE__*/React__default['default'].createElement(\"text\", Object.assign({\n      dominantBaseline: \"central\"\n    }, props));\n  }\n\n  function round(number) {\n    var divisor = 1e14; // 14 decimals\n\n    return Math.round((number + Number.EPSILON) * divisor) / divisor;\n  }\n\n  function evaluateTextAnchorPosition(_ref) {\n    var labelPosition = _ref.labelPosition,\n        lineWidth = _ref.lineWidth,\n        labelHorizontalShift = _ref.labelHorizontalShift;\n    var dx = round(labelHorizontalShift); // Label in the vertical center\n\n    if (dx === 0) {\n      return 'middle';\n    } // Outward label\n\n\n    if (labelPosition > 100) {\n      return dx > 0 ? 'start' : 'end';\n    } // Inward label\n\n\n    var innerRadius = 100 - lineWidth;\n\n    if (labelPosition < innerRadius) {\n      return dx > 0 ? 'end' : 'start';\n    } // Overlying label\n\n\n    return 'middle';\n  }\n\n  function renderLabelElement(renderLabel, labelProps) {\n    var label = renderLabel(labelProps);\n\n    if (typeof label === 'string' || typeof label === 'number') {\n      return /*#__PURE__*/React__default['default'].createElement(ReactMinimalPieChartLabel, Object.assign({\n        key: \"label-\" + (labelProps.dataEntry.key || labelProps.dataIndex)\n      }, labelProps), label);\n    }\n\n    if (React__default['default'].isValidElement(label)) {\n      return label;\n    }\n\n    return null;\n  }\n\n  function renderLabels(data, props) {\n    return data.map(function (dataEntry, index) {\n      var _functionProp;\n\n      var segmentsShift = (_functionProp = functionProp(props.segmentsShift, index)) != null ? _functionProp : 0;\n      var distanceFromCenter = extractPercentage(props.radius, props.labelPosition) + segmentsShift;\n\n      var _shiftVectorAlongAngl = shiftVectorAlongAngle(bisectorAngle(dataEntry.startAngle, dataEntry.degrees), distanceFromCenter),\n          dx = _shiftVectorAlongAngl.dx,\n          dy = _shiftVectorAlongAngl.dy; // This object is passed as argument to the \"label\" function prop\n\n\n      var labelRenderProps = {\n        x: props.center[0],\n        y: props.center[1],\n        dx: dx,\n        dy: dy,\n        textAnchor: evaluateTextAnchorPosition({\n          labelPosition: props.labelPosition,\n          lineWidth: props.lineWidth,\n          labelHorizontalShift: dx\n        }),\n        dataEntry: dataEntry,\n        dataIndex: index,\n        style: functionProp(props.labelStyle, index)\n      };\n      return props.label && renderLabelElement(props.label, labelRenderProps);\n    });\n  }\n\n  var partialCircle = function partialCircle(cx, cy, r, start, end) {\n    var length = end - start;\n    if (length === 0) return [];\n    var fromX = r * Math.cos(start) + cx;\n    var fromY = r * Math.sin(start) + cy;\n    var toX = r * Math.cos(end) + cx;\n    var toY = r * Math.sin(end) + cy;\n    var large = Math.abs(length) <= Math.PI ? '0' : '1';\n    var sweep = length < 0 ? '0' : '1';\n    return [['M', fromX, fromY], ['A', r, r, 0, large, sweep, toX, toY]];\n  };\n\n  var svgPartialCircle = partialCircle;\n\n  function makePathCommands(cx, cy, startAngle, lengthAngle, radius) {\n    var patchedLengthAngle = valueBetween(lengthAngle, -359.999, 359.999);\n    return svgPartialCircle(cx, cy, // center X and Y\n    radius, degreesToRadians(startAngle), degreesToRadians(startAngle + patchedLengthAngle)).map(function (command) {\n      return command.join(' ');\n    }).join(' ');\n  }\n\n  function ReactMinimalPieChartPath(_ref) {\n    var cx = _ref.cx,\n        cy = _ref.cy,\n        lengthAngle = _ref.lengthAngle,\n        lineWidth = _ref.lineWidth,\n        radius = _ref.radius,\n        _ref$shift = _ref.shift,\n        shift = _ref$shift === void 0 ? 0 : _ref$shift,\n        reveal = _ref.reveal,\n        rounded = _ref.rounded,\n        startAngle = _ref.startAngle,\n        title = _ref.title,\n        props = _objectWithoutPropertiesLoose(_ref, [\"cx\", \"cy\", \"lengthAngle\", \"lineWidth\", \"radius\", \"shift\", \"reveal\", \"rounded\", \"startAngle\", \"title\"]);\n\n    var pathRadius = radius - lineWidth / 2; //@NOTE This shift might be rendered as a translation in future\n\n    var _shiftVectorAlongAngl = shiftVectorAlongAngle(bisectorAngle(startAngle, lengthAngle), shift),\n        dx = _shiftVectorAlongAngl.dx,\n        dy = _shiftVectorAlongAngl.dy;\n\n    var pathCommands = makePathCommands(cx + dx, cy + dy, startAngle, lengthAngle, pathRadius);\n    var strokeDasharray;\n    var strokeDashoffset; // Animate/hide paths with \"stroke-dasharray\" + \"stroke-dashoffset\"\n    // https://css-tricks.com/svg-line-animation-works/\n\n    if (isNumber(reveal)) {\n      var pathLength = degreesToRadians(pathRadius) * lengthAngle;\n      strokeDasharray = Math.abs(pathLength);\n      strokeDashoffset = strokeDasharray - extractPercentage(strokeDasharray, reveal);\n    }\n\n    return /*#__PURE__*/React__default['default'].createElement(\"path\", Object.assign({\n      d: pathCommands,\n      fill: \"none\",\n      strokeWidth: lineWidth,\n      strokeDasharray: strokeDasharray,\n      strokeDashoffset: strokeDashoffset,\n      strokeLinecap: rounded ? 'round' : undefined\n    }, props), title && /*#__PURE__*/React__default['default'].createElement(\"title\", null, title));\n  }\n\n  function combineSegmentTransitionsStyle(duration, easing, customStyle) {\n    // Merge chart's animation CSS transition with \"transition\" found to customStyle\n    var transition = \"stroke-dashoffset \" + duration + \"ms \" + easing;\n\n    if (customStyle && customStyle.transition) {\n      transition = transition + \",\" + customStyle.transition;\n    }\n\n    return {\n      transition: transition\n    };\n  }\n\n  function getRevealValue(props) {\n    //@NOTE When animation is on, chart has to be fully revealed when reveal is not set\n    if (props.animate && !isNumber(props.reveal)) {\n      return 100;\n    }\n\n    return props.reveal;\n  }\n\n  function makeEventHandler(eventHandler, payload) {\n    return eventHandler && function (e) {\n      eventHandler(e, payload);\n    };\n  }\n\n  function renderSegments(data, props, revealOverride) {\n    // @NOTE this should go in Path component. Here for performance reasons\n    var reveal = revealOverride != null ? revealOverride : getRevealValue(props);\n    var radius = props.radius,\n        _props$center = props.center,\n        cx = _props$center[0],\n        cy = _props$center[1];\n    var lineWidth = extractPercentage(radius, props.lineWidth);\n    var paths = data.map(function (dataEntry, index) {\n      var segmentsStyle = functionProp(props.segmentsStyle, index);\n      return /*#__PURE__*/React__default['default'].createElement(ReactMinimalPieChartPath, {\n        cx: cx,\n        cy: cy,\n        key: dataEntry.key || index,\n        lengthAngle: dataEntry.degrees,\n        lineWidth: lineWidth,\n        radius: radius,\n        rounded: props.rounded,\n        reveal: reveal,\n        shift: functionProp(props.segmentsShift, index),\n        startAngle: dataEntry.startAngle,\n        title: dataEntry.title,\n        style: Object.assign({}, segmentsStyle, props.animate && combineSegmentTransitionsStyle(props.animationDuration, props.animationEasing, segmentsStyle)),\n        stroke: dataEntry.color,\n        tabIndex: props.segmentsTabIndex,\n        onBlur: makeEventHandler(props.onBlur, index),\n        onClick: makeEventHandler(props.onClick, index),\n        onFocus: makeEventHandler(props.onFocus, index),\n        onKeyDown: makeEventHandler(props.onKeyDown, index),\n        onMouseOver: makeEventHandler(props.onMouseOver, index),\n        onMouseOut: makeEventHandler(props.onMouseOut, index)\n      });\n    });\n\n    if (props.background) {\n      paths.unshift( /*#__PURE__*/React__default['default'].createElement(ReactMinimalPieChartPath, {\n        cx: cx,\n        cy: cy,\n        key: \"bg\",\n        lengthAngle: props.lengthAngle,\n        lineWidth: lineWidth,\n        radius: radius,\n        rounded: props.rounded,\n        startAngle: props.startAngle,\n        stroke: props.background\n      }));\n    }\n\n    return paths;\n  }\n\n  var defaultProps = {\n    animationDuration: 500,\n    animationEasing: 'ease-out',\n    center: [50, 50],\n    data: [],\n    labelPosition: 50,\n    lengthAngle: 360,\n    lineWidth: 100,\n    paddingAngle: 0,\n    radius: 50,\n    startAngle: 0,\n    viewBoxSize: [100, 100]\n  };\n\n  function ReactMinimalPieChart(props) {\n    var _useState = React.useState(props.animate ? 0 : null),\n        revealOverride = _useState[0],\n        setRevealOverride = _useState[1];\n\n    React.useEffect(function () {\n      if (props.animate) {\n        return startInitialAnimation();\n      }\n\n      function startInitialAnimation() {\n        var animationTimerId;\n        var animationRAFId;\n        animationTimerId = setTimeout(function () {\n          animationTimerId = null;\n          animationRAFId = requestAnimationFrame(function () {\n            animationRAFId = null;\n            setRevealOverride(null); // Start animation\n          });\n        });\n        return function () {\n          animationTimerId && clearTimeout(animationTimerId);\n          animationRAFId && cancelAnimationFrame(animationRAFId);\n        };\n      }\n    }, []);\n    var extendedData = extendData(props);\n    return /*#__PURE__*/React__default['default'].createElement(\"svg\", {\n      viewBox: \"0 0 \" + props.viewBoxSize[0] + \" \" + props.viewBoxSize[1],\n      width: \"100%\",\n      height: \"100%\",\n      className: props.className,\n      style: props.style\n    }, renderSegments(extendedData, props, revealOverride), props.label && renderLabels(extendedData, props), props.children);\n  }\n\n  ReactMinimalPieChart.defaultProps = defaultProps;\n  exports.PieChart = ReactMinimalPieChart;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"mappings":"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","names":["degreesToRadians","degrees","Math","PI","valueBetween","value","min","max","extractPercentage","percentage","bisectorAngle","startAngle","lengthAngle","shiftVectorAlongAngle","angle","distance","angleRadians","dx","cos","dy","sin","isNumber","functionProp","prop","payload","sumValues","data","sum","i","length","extendData","totalAngle","totalValue","paddingAngle","chartStartAngle","total","normalizedTotalAngle","numberOfPaddings","abs","singlePaddingDegrees","sign","degreesTakenByPadding","degreesTakenByPaths","lastSegmentEnd","extendedData","dataEntry","valueInPercentage","push","Object","assign","ReactMinimalPieChartLabel","_ref","dataIndex","props","React","dominantBaseline","round","number","divisor","Number","EPSILON","evaluateTextAnchorPosition","labelPosition","lineWidth","labelHorizontalShift","innerRadius","renderLabelElement","renderLabel","labelProps","label","DefaultLabel","key","isValidElement","renderLabels","map","index","segmentsShift","distanceFromCenter","radius","labelRenderProps","x","center","y","textAnchor","style","labelStyle","partialCircle","cx","cy","r","start","end","fromX","fromY","toX","toY","large","sweep","module","makePathCommands","patchedLengthAngle","command","join","ReactMinimalPieChartPath","shift","reveal","rounded","title","pathRadius","pathCommands","strokeDasharray","strokeDashoffset","pathLength","d","fill","strokeWidth","strokeLinecap","undefined","combineSegmentTransitionsStyle","duration","easing","customStyle","transition","getRevealValue","animate","makeEventHandler","eventHandler","e","renderSegments","revealOverride","paths","segmentsStyle","Path","animationDuration","animationEasing","stroke","color","tabIndex","segmentsTabIndex","onBlur","onClick","onFocus","onKeyDown","onMouseOver","onMouseOut","background","unshift","defaultProps","viewBoxSize","ReactMinimalPieChart","useState","setRevealOverride","useEffect","startInitialAnimation","animationTimerId","animationRAFId","setTimeout","requestAnimationFrame","clearTimeout","cancelAnimationFrame","viewBox","width","height","className","children"],"sources":["D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\utils.ts","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\Chart\\extendData.ts","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\Label.tsx","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\Chart\\renderLabels.tsx","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\node_modules\\svg-partial-circle\\index.js","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\Path.tsx","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\Chart\\renderSegments.tsx","D:\\working\\FIVERR\\SMF-Website-v2\\node_modules\\react-minimal-pie-chart\\src\\Chart\\Chart.tsx"],"sourcesContent":["export function degreesToRadians(degrees: number) {\n  return (degrees * Math.PI) / 180;\n}\n\nexport function valueBetween(value: number, min: number, max: number) {\n  if (value > max) return max;\n  if (value < min) return min;\n  return value;\n}\n\nexport function extractPercentage(value: number, percentage: number) {\n  return (percentage / 100) * value;\n}\n\nexport function bisectorAngle(startAngle: number, lengthAngle: number) {\n  return startAngle + lengthAngle / 2;\n}\n\nexport function shiftVectorAlongAngle(angle: number, distance: number) {\n  const angleRadians = degreesToRadians(angle);\n  return {\n    dx: distance * Math.cos(angleRadians),\n    dy: distance * Math.sin(angleRadians),\n  };\n}\n\nexport function isNumber(value: unknown): value is number {\n  return typeof value === 'number';\n}\n\nexport function functionProp<Prop, Payload>(\n  prop: Prop,\n  payload?: Payload\n): Prop extends (...args: any) => any ? ReturnType<Prop> : Prop {\n  return typeof prop === 'function' ? prop(payload) : prop;\n}\n","import { extractPercentage, valueBetween } from '../utils';\nimport type { Data, ExtendedData } from '../commonTypes';\nimport type { PropsWithDefaults as ChartProps } from './Chart';\n\nfunction sumValues(data: Data): number {\n  let sum = 0;\n  for (let i = 0; i < data.length; i++) {\n    sum += data[i].value;\n  }\n  return sum;\n}\n\n// Append \"percentage\", \"degrees\" and \"startAngle\" to each data entry\nexport default function extendData({\n  data,\n  lengthAngle: totalAngle,\n  totalValue,\n  paddingAngle,\n  startAngle: chartStartAngle,\n}: ChartProps): ExtendedData {\n  const total = totalValue || sumValues(data);\n  const normalizedTotalAngle = valueBetween(totalAngle, -360, 360);\n  const numberOfPaddings =\n    Math.abs(normalizedTotalAngle) === 360 ? data.length : data.length - 1;\n  const singlePaddingDegrees = Math.abs(paddingAngle) * Math.sign(totalAngle);\n  const degreesTakenByPadding = singlePaddingDegrees * numberOfPaddings;\n  const degreesTakenByPaths = normalizedTotalAngle - degreesTakenByPadding;\n  let lastSegmentEnd = 0;\n  const extendedData = [];\n\n  // @NOTE: Shall we evaluate percentage accordingly to dataEntry.value's sign?\n  for (let i = 0; i < data.length; i++) {\n    const dataEntry = data[i];\n    const valueInPercentage = total === 0 ? 0 : (dataEntry.value / total) * 100;\n    const degrees = extractPercentage(degreesTakenByPaths, valueInPercentage);\n    const startAngle = lastSegmentEnd + chartStartAngle;\n    lastSegmentEnd = lastSegmentEnd + degrees + singlePaddingDegrees;\n    extendedData.push(\n      Object.assign(\n        {\n          percentage: valueInPercentage,\n          startAngle,\n          degrees,\n        },\n        dataEntry\n      )\n    );\n  }\n  return extendedData;\n}\n","import React from 'react';\nimport type { CSSProperties, SVGProps } from 'react';\nimport type { ExtendedDataEntry } from './commonTypes';\n\nexport type LabelRenderProps = {\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n  textAnchor: string;\n  dataEntry: ExtendedDataEntry;\n  dataIndex: number;\n  style?: CSSProperties;\n};\n\ntype Props = SVGProps<SVGTextElement> & LabelRenderProps;\n\nexport default function ReactMinimalPieChartLabel({\n  dataEntry,\n  dataIndex,\n  ...props\n}: Props) {\n  return <text dominantBaseline=\"central\" {...props} />;\n}\n","import React from 'react';\nimport DefaultLabel from '../Label';\nimport {\n  bisectorAngle,\n  extractPercentage,\n  functionProp,\n  shiftVectorAlongAngle,\n} from '../utils';\nimport type { PropsWithDefaults as ChartProps } from './Chart';\nimport type { LabelRenderProps } from '../Label';\nimport type { ExtendedData, LabelRenderFunction } from '../commonTypes';\n\nfunction round(number: number): number {\n  const divisor = 1e14; // 14 decimals\n  return Math.round((number + Number.EPSILON) * divisor) / divisor;\n}\n\nfunction evaluateTextAnchorPosition({\n  labelPosition,\n  lineWidth,\n  labelHorizontalShift,\n}: {\n  labelPosition: number;\n  lineWidth: number;\n  labelHorizontalShift: number;\n}) {\n  const dx = round(labelHorizontalShift);\n  // Label in the vertical center\n  if (dx === 0) {\n    return 'middle';\n  }\n  // Outward label\n  if (labelPosition > 100) {\n    return dx > 0 ? 'start' : 'end';\n  }\n  // Inward label\n  const innerRadius = 100 - lineWidth;\n  if (labelPosition < innerRadius) {\n    return dx > 0 ? 'end' : 'start';\n  }\n  // Overlying label\n  return 'middle';\n}\n\nfunction renderLabelElement(\n  renderLabel: LabelRenderFunction,\n  labelProps: LabelRenderProps\n): JSX.Element | null {\n  const label = renderLabel(labelProps);\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\n      <DefaultLabel\n        key={`label-${labelProps.dataEntry.key || labelProps.dataIndex}`}\n        {...labelProps}\n      >\n        {label}\n      </DefaultLabel>\n    );\n  }\n\n  if (React.isValidElement(label)) {\n    return label;\n  }\n  return null;\n}\n\nexport default function renderLabels(data: ExtendedData, props: ChartProps) {\n  return data.map((dataEntry, index) => {\n    const segmentsShift = functionProp(props.segmentsShift, index) ?? 0;\n    const distanceFromCenter =\n      extractPercentage(props.radius, props.labelPosition) + segmentsShift;\n    const { dx, dy } = shiftVectorAlongAngle(\n      bisectorAngle(dataEntry.startAngle, dataEntry.degrees),\n      distanceFromCenter\n    );\n\n    // This object is passed as argument to the \"label\" function prop\n    const labelRenderProps = {\n      x: props.center[0],\n      y: props.center[1],\n      dx,\n      dy,\n      textAnchor: evaluateTextAnchorPosition({\n        labelPosition: props.labelPosition,\n        lineWidth: props.lineWidth,\n        labelHorizontalShift: dx,\n      }),\n      dataEntry,\n      dataIndex: index,\n      style: functionProp(props.labelStyle, index),\n    };\n\n    return props.label && renderLabelElement(props.label, labelRenderProps);\n  });\n}\n","'use strict'\n\n// from http://stackoverflow.com/a/18473154\nconst partialCircle = (cx, cy, r, start, end) => {\n\tconst length = end - start\n\tif (length === 0) return []\n\n\tconst fromX = r * Math.cos(start) + cx\n\tconst fromY = r * Math.sin(start) + cy\n\tconst toX = r * Math.cos(end) + cx\n\tconst toY = r * Math.sin(end) + cy\n\tconst large = Math.abs(length) <= Math.PI ? '0' : '1'\n\tconst sweep = length < 0 ? '0' : '1'\n\n\treturn [\n\t\t['M', fromX, fromY],\n\t\t['A', r, r, 0, large, sweep, toX, toY]\n\t]\n}\n\nmodule.exports = partialCircle\n","import React from 'react';\nimport type { SVGProps } from 'react';\nimport partialCircle from 'svg-partial-circle';\nimport {\n  bisectorAngle,\n  degreesToRadians,\n  extractPercentage,\n  isNumber,\n  shiftVectorAlongAngle,\n  valueBetween,\n} from './utils';\n\nexport function makePathCommands(\n  cx: number,\n  cy: number,\n  startAngle: number,\n  lengthAngle: number,\n  radius: number\n): string {\n  const patchedLengthAngle = valueBetween(lengthAngle, -359.999, 359.999);\n\n  return partialCircle(\n    cx,\n    cy, // center X and Y\n    radius,\n    degreesToRadians(startAngle),\n    degreesToRadians(startAngle + patchedLengthAngle)\n  )\n    .map((command) => command.join(' '))\n    .join(' ');\n}\n\ntype Props = SVGProps<SVGPathElement> & {\n  cx: number;\n  cy: number;\n  lengthAngle: number;\n  lineWidth: number;\n  radius: number;\n  reveal?: number;\n  rounded?: boolean;\n  shift?: number;\n  startAngle: number;\n  title?: string | number;\n};\n\nexport default function ReactMinimalPieChartPath({\n  cx,\n  cy,\n  lengthAngle,\n  lineWidth,\n  radius,\n  shift = 0,\n  reveal,\n  rounded,\n  startAngle,\n  title,\n  ...props\n}: Props) {\n  const pathRadius = radius - lineWidth / 2;\n  //@NOTE This shift might be rendered as a translation in future\n  const { dx, dy } = shiftVectorAlongAngle(\n    bisectorAngle(startAngle, lengthAngle),\n    shift\n  );\n\n  const pathCommands = makePathCommands(\n    cx + dx,\n    cy + dy,\n    startAngle,\n    lengthAngle,\n    pathRadius\n  );\n  let strokeDasharray;\n  let strokeDashoffset;\n\n  // Animate/hide paths with \"stroke-dasharray\" + \"stroke-dashoffset\"\n  // https://css-tricks.com/svg-line-animation-works/\n  if (isNumber(reveal)) {\n    const pathLength = degreesToRadians(pathRadius) * lengthAngle;\n    strokeDasharray = Math.abs(pathLength);\n    strokeDashoffset =\n      strokeDasharray - extractPercentage(strokeDasharray, reveal);\n  }\n\n  return (\n    <path\n      d={pathCommands}\n      fill=\"none\"\n      strokeWidth={lineWidth}\n      strokeDasharray={strokeDasharray}\n      strokeDashoffset={strokeDashoffset}\n      strokeLinecap={rounded ? 'round' : undefined}\n      {...props}\n    >\n      {title && <title>{title}</title>}\n    </path>\n  );\n}\n","import React from 'react';\nimport type { CSSProperties } from 'react';\nimport Path from '../Path';\nimport { extractPercentage, functionProp, isNumber } from '../utils';\nimport type { ExtendedData } from '../commonTypes';\nimport type { PropsWithDefaults as ChartProps } from './Chart';\n\nfunction combineSegmentTransitionsStyle(\n  duration: number,\n  easing: string,\n  customStyle?: CSSProperties\n): { transition: string } {\n  // Merge chart's animation CSS transition with \"transition\" found to customStyle\n  let transition = `stroke-dashoffset ${duration}ms ${easing}`;\n  if (customStyle && customStyle.transition) {\n    transition = `${transition},${customStyle.transition}`;\n  }\n  return {\n    transition,\n  };\n}\n\nfunction getRevealValue<Reveal>(props: { reveal?: Reveal; animate?: boolean }) {\n  //@NOTE When animation is on, chart has to be fully revealed when reveal is not set\n  if (props.animate && !isNumber(props.reveal)) {\n    return 100;\n  }\n  return props.reveal;\n}\n\nfunction makeEventHandler<Event, EventHandler, Payload>(\n  eventHandler: undefined | (EventHandler & Function),\n  payload: Payload\n) {\n  return (\n    eventHandler &&\n    ((e: Event) => {\n      eventHandler(e, payload);\n    })\n  );\n}\n\nexport default function renderSegments(\n  data: ExtendedData,\n  props: ChartProps,\n  revealOverride?: null | number\n) {\n  // @NOTE this should go in Path component. Here for performance reasons\n  const reveal = revealOverride ?? getRevealValue(props);\n  const {\n    radius,\n    center: [cx, cy],\n  } = props;\n  const lineWidth = extractPercentage(radius, props.lineWidth);\n  const paths = data.map((dataEntry, index) => {\n    const segmentsStyle = functionProp(props.segmentsStyle, index);\n    return (\n      <Path\n        cx={cx}\n        cy={cy}\n        key={dataEntry.key || index}\n        lengthAngle={dataEntry.degrees}\n        lineWidth={lineWidth}\n        radius={radius}\n        rounded={props.rounded}\n        reveal={reveal}\n        shift={functionProp(props.segmentsShift, index)}\n        startAngle={dataEntry.startAngle}\n        title={dataEntry.title}\n        style={Object.assign(\n          {},\n          segmentsStyle,\n          props.animate &&\n            combineSegmentTransitionsStyle(\n              props.animationDuration,\n              props.animationEasing,\n              segmentsStyle\n            )\n        )}\n        stroke={dataEntry.color}\n        tabIndex={props.segmentsTabIndex}\n        onBlur={makeEventHandler(props.onBlur, index)}\n        onClick={makeEventHandler(props.onClick, index)}\n        onFocus={makeEventHandler(props.onFocus, index)}\n        onKeyDown={makeEventHandler(props.onKeyDown, index)}\n        onMouseOver={makeEventHandler(props.onMouseOver, index)}\n        onMouseOut={makeEventHandler(props.onMouseOut, index)}\n      />\n    );\n  });\n\n  if (props.background) {\n    paths.unshift(\n      <Path\n        cx={cx}\n        cy={cy}\n        key=\"bg\"\n        lengthAngle={props.lengthAngle}\n        lineWidth={lineWidth}\n        radius={radius}\n        rounded={props.rounded}\n        startAngle={props.startAngle}\n        stroke={props.background}\n      />\n    );\n  }\n\n  return paths;\n}\n","import React, { useState, useEffect } from 'react';\nimport type {\n  CSSProperties,\n  FocusEvent,\n  KeyboardEvent,\n  MouseEvent,\n  ReactNode,\n} from 'react';\nimport extendData from './extendData';\nimport renderLabels from './renderLabels';\nimport renderSegments from './renderSegments';\nimport type { Data, EventHandler, LabelRenderFunction } from '../commonTypes';\n\ntype Props = {\n  animate?: boolean;\n  animationDuration?: number;\n  animationEasing?: string;\n  background?: string;\n  center?: [number, number];\n  children?: ReactNode;\n  className?: string;\n  data: Data;\n  lengthAngle?: number;\n  lineWidth?: number;\n  label?: LabelRenderFunction;\n  labelPosition?: number;\n  labelStyle?:\n    | CSSProperties\n    | ((dataIndex: number) => CSSProperties | undefined);\n  onBlur?: EventHandler<FocusEvent>;\n  onClick?: EventHandler<MouseEvent>;\n  onFocus?: EventHandler<FocusEvent>;\n  onKeyDown?: EventHandler<KeyboardEvent>;\n  onMouseOut?: EventHandler<MouseEvent>;\n  onMouseOver?: EventHandler<MouseEvent>;\n  paddingAngle?: number;\n  radius?: number;\n  reveal?: number;\n  rounded?: boolean;\n  segmentsShift?: number | ((dataIndex: number) => number | undefined);\n  segmentsStyle?:\n    | CSSProperties\n    | ((dataIndex: number) => CSSProperties | undefined);\n  segmentsTabIndex?: number;\n  startAngle?: number;\n  style?: CSSProperties;\n  totalValue?: number;\n  viewBoxSize?: [number, number];\n};\n\nconst defaultProps = {\n  animationDuration: 500,\n  animationEasing: 'ease-out',\n  center: [50, 50] as [number, number],\n  data: [] as Data,\n  labelPosition: 50,\n  lengthAngle: 360,\n  lineWidth: 100,\n  paddingAngle: 0,\n  radius: 50,\n  startAngle: 0,\n  viewBoxSize: [100, 100] as [number, number],\n};\n\nexport type PropsWithDefaults = Props & typeof defaultProps;\n\nexport function ReactMinimalPieChart(props: PropsWithDefaults) {\n  const [revealOverride, setRevealOverride] = useState(\n    props.animate ? 0 : null\n  );\n  useEffect(() => {\n    if (props.animate) {\n      return startInitialAnimation();\n    }\n\n    function startInitialAnimation() {\n      let animationTimerId: NodeJS.Timeout | null;\n      let animationRAFId: number | null;\n      animationTimerId = setTimeout(() => {\n        animationTimerId = null;\n        animationRAFId = requestAnimationFrame(() => {\n          animationRAFId = null;\n          setRevealOverride(null); // Start animation\n        });\n      });\n\n      return () => {\n        animationTimerId && clearTimeout(animationTimerId);\n        animationRAFId && cancelAnimationFrame(animationRAFId);\n      };\n    }\n  }, []);\n\n  const extendedData = extendData(props);\n  return (\n    <svg\n      viewBox={`0 0 ${props.viewBoxSize[0]} ${props.viewBoxSize[1]}`}\n      width=\"100%\"\n      height=\"100%\"\n      className={props.className}\n      style={props.style}\n    >\n      {renderSegments(extendedData, props, revealOverride)}\n      {props.label && renderLabels(extendedData, props)}\n      {props.children}\n    </svg>\n  );\n}\n\nReactMinimalPieChart.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"script"}